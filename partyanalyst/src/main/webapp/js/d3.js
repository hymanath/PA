d3.slider=function(){function b(b){b.each(function(){function b(a){"boolean"===typeof d&&(d=d3.svg.axis().ticks(Math.round(f/100)).tickFormat(z).orient("horizontal"===k?"bottom":"right"));v=e.copy().range([0,f]);d.scale(v);a=a.append("svg").classed("d3-slider-axis d3-slider-axis-"+d.orient(),!0).on("click",w);var m=a.append("g");"horizontal"===k?(a.style("left",-c+"px"),a.attr({width:f+2*c,height:x}),"top"===d.orient()?(a.style("top",-c),m.attr("transform","translate("+c+","+c+")")):m.attr("transform", "translate("+c+",0)")):(a.style("top",-c),a.attr({width:c,height:f+2*c}),"left"===d.orient()?(a.style("left",-c),m.attr("transform","translate("+c+","+c+")")):m.attr("transform","translate(0,"+c+")"));m.call(d)}function a(b){b=r(e.invert(b/f));if(g!==b){var c=p(e(r(g))),d=p(e(r(b))),h="horizontal"===k?"left":"bottom";y.slide(d3.event.sourceEvent||d3.event,g=b);n?q.transition().styleTween(h,function(){return d3.interpolate(c,d)}).duration("number"===typeof n?n:250):q.style(h,d)}}function r(a){var b= (a-e.domain()[0])%h;a-=b;2*Math.abs(b)>=h&&(a+=0<b?h:-h);return a}function A(){a(d3.event.offsetX||d3.event.layerX)}function B(){a(f-d3.event.offsetY||d3.event.layerY)}function C(){a(Math.max(0,Math.min(f,d3.event.x)))}function D(){a(f-Math.max(0,Math.min(f,d3.event.y)))}function w(){d3.event.stopPropagation()}e||(e=d3.scale.linear().domain([s,t]));g=g||e.domain()[0];var l=d3.select(this).classed("d3-slider d3-slider-"+k,!0),u=d3.behavior.drag(),q=l.append("a").classed("d3-slider-handle123",!0).attr("xlink:href", "#").on("click",w).call(u);"horizontal"===k?(l.on("click",A),u.on("drag",C),q.style("left",p(e(g))),f=parseInt(l.style("width"),10)):(l.on("click",B),u.on("drag",D),q.style("bottom",p(e(g))),f=parseInt(l.style("height"),10));d&&b(l)})}var s=0,t=10,h=1,n=!0,k="horizontal",d=!1,c=50,g,e,x=c;360>width&&(c=12,x=c+20);var v,y=d3.dispatch("slide"),p=d3.format(".2%"),z=d3.format(".0"),f;b.min=function(a){if(!arguments.length)return s;s=a;return b};b.max=function(a){if(!arguments.length)return t;t=a;return b}; b.step=function(a){if(!arguments.length)return h;h=a;return b};b.animate=function(a){if(!arguments.length)return n;n=a;return b};b.orientation=function(a){if(!arguments.length)return k;k=a;return b};b.axis=function(a){if(!arguments.length)return d;d=a;return b};b.margin=function(a){if(!arguments.length)return c;c=a;return b};b.value=function(a){if(!arguments.length)return g;g=a;return b};b.scale=function(a){if(!arguments.length)return e;e=a;return b};d3.rebind(b,y,"on");return b};